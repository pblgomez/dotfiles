#!/usr/bin/env bash

pacmd set-card-profile 0 output:hdmi-stereo-extra1+input:analog-stereo
notify-send "Docked"
killall -q picom
while pgrep -x picom >/dev/null; do sleep 1; done
picom --experimental-backends --backend glx --blur-method dual_kawase --blur-strength 10 &
 
# wallpaper
if [ -f ~/.cache/bg ]; then
  sleep 4; xwallpaper --zoom ~/.cache/bg &
else
  cp $(find $(pwd)/Pictures/Wallpapers -type f | sort -R |head -n1) ~/.cache/bg && convert -resize 1920 -blur 30x30 ~/.cache/bg ~/.cache/bg.png && xwallpaper --zoom ~/.cache/bg &
fi

# bspwm
bspc monitor HDMI2 -d 1 2 3 4 5 6 7 8 9 10

# Polybar
$HOME/.config/polybar/launch.sh &
